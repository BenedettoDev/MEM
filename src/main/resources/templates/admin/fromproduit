<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:fragment="head">
<meta charset="utf-8" />
<link rel="stylesheet" type="text/css"
	href="../../static/css/bootstrap.min.css"
	th:href="@{/css/bootstrap.min.css}" />
<link rel="stylesheet" type="text/css"
	href="../../static/css/myStyle.css" th:href="@{/css/myStyle.css}" />
</head>
<body>

	<header th:replace="template :: header"></header>
	<div th:replace="template :: adminNav"></div>
	<div class="container spacer">
			<div class="col-sm-10 col-sm-offset-1 spacer">
			<div class="panel panel-default ">
				<div class="panel-heading">Ajout d'un produit</div>
				<div class="panel-body">
					<form th:action="@{SaveProduit}" method="post"
						th:object="${produit}">
						<div class="row">
							<div class="col-xs-12 col-sm-6 form-group">
								<label class="control-label">Label</label> <input type="text"
									th:field="*{label}" class="form-control" /> <span
									class="text-danger" th:errors="*{label}"></span>
							</div>
							<div class="col-xs-12 col-sm-6 form-group">
								<label class="control-label">Image</label> <input type="file"
									th:field="*{img}" class="form-control" /> <span
									class="text-danger" th:errors="*{img}"></span>
							</div>
							<div class="col-xs-12 col-sm-6 form-group">
								<label class="control-label">Nom</label> <input type="text"
									th:field="*{nom}" class="form-control" /> <span
									class="text-danger" th:errors="*{nom}"></span>
							</div>

							<div class="col-xs-12 col-sm-6 form-group">
								<label class="control-label">Lieu</label> 
								<select id="select_lieu" th:field="*{lieu}" class="form-control" onchange="
								if (this.selectedIndex == 1){
									document.getElementById('input_lieu').style.display = 'inline';
									document.getElementById('reset_lieu').style.display = 'inline';
									document.getElementById('select_lieu').style.display = 'none';
								}
								">
									<option value="NONE" label="-- Select --"></option>
									<option value="Autre" th:text="Autre"></option>
									<option th:each="lieu : ${lieux}" th:value="${lieu.id}" th:text="${lieu.nom}" th:seleted="${lieu.nom}"></option>		
								</select> 
								<div class="input-group">
									<input type="text" id="input_lieu" style="display: none;"	th:field="*{lieu}" class="form-control" /> 
									<span class="input-group-btn">
										<button type="button" id="reset_lieu" style="display:none;" class="btn btn-danger" onclick="resetInput()">X</button>
									</span>
								</div>
								<script>
									function resetInput() {
										document.getElementById('select_lieu').style.display = 'inline';
										document.getElementById('reset_lieu').style.display = 'none';
										document.getElementById('input_lieu').style.display = 'none';
										$('#select_lieu option[value="NONE"]').prop('selected', true);
									}
								</script>
								<span class="text-danger" th:errors="*{lieu}"></span>
							</div>
							<div class="col-xs-12 col-sm-6 form-group">
								<label class="control-label">Prix</label> <input type="text"
									th:field="*{prix}" class="form-control" /> <span
									class="text-danger" th:errors="*{prix}"></span>
							</div>
							<div class="col-xs-12 col-sm-6 form-group">
								<label class="control-label">Unité</label> <select
									th:field="*{unite}" class="form-control">
									<option value="NONE" label="-- Select --"></option>
									<option th:each="unite : ${unites}" th:value="${unite.key}"
										th:text="${unite.value}"></option>
								</select> <span class="text-danger" th:errors="*{unite}"></span>
							</div>
							<div class="col-xs-12 col-sm-6 form-group">
								<label class="control-label">Catégorie</label> 
								<select id="select_categorie" th:field="*{categorie}" class="form-control"  onchange="
								if (this.selectedIndex == 1){
									document.getElementById('input_categorie').style.display = 'inline';
									document.getElementById('reset_categorie').style.display = 'inline';
									document.getElementById('select_categorie').style.display = 'none';
								}
								">
									<option value="NONE" label="-- Select --"></option>
									<option value="Autre" th:text="Autre"></option>
								<option th:each="categorie : ${categories}" th:value="${categorie.nom}" th:text="${categorie.nom}"></option>
								</select>
								<div class="input-group">
									<input type="text" id="input_categorie" style="display: none;"	th:field="*{categorie}" class="form-control" /> 
									<span class="input-group-btn">
										<button type="button" id="reset_categorie" style="display:none;" class="btn btn-danger" onclick="resetInputCategorie()">X</button>
									</span>
								</div>
								<script>
									function resetInputCategorie() {
										document.getElementById('select_categorie').style.display = 'inline';
										document.getElementById('reset_categorie').style.display = 'none';
										document.getElementById('input_categorie').style.display = 'none';
										$('#select_categorie option[value="NONE"]').prop('selected', true);
									}
								</script>
								<span class="text-danger" th:errors="*{unite}"></span>
							</div>
						</div>
						<div class="row">
							<div class="col-xs-12 form-group">
								<label class="control-label">Description</label>
								<textarea type="text" th:field="*{description}"
									class="form-control" rows="5" id="comment"></textarea>
								<span class="text-danger" th:errors="*{description}"></span>
							</div>

						</div>
						<button type="submit" class="btn btn-primary">Submit</button>
					</form>
				</div>
			</div>
		</div>
	</div>
	<footer th:replace="template :: footer"></footer>
   <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
   <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
	<script type="text/javascript">
		
		$("#autre_lieu").change(function() {
			var str ="";
			$("select option:selected").each(function() {
			      str += $( this ).text() + " ";
		    });
		    alert( str );
		}).trigger("change");
	</script>
</body>
</html>